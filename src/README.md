# Source Code (Logic)

Эта папка содержит реализацию программной логики игры Каркассон и интеллектуальных агентов.

## Архитектура

### 1. Logic Layer (`src/logic/`)
Чистая реализация правил игры.
- `models.py`: Классы `Tile`, `Side`, `Segment`. Тайлы представлены как графы со связями между сторонами.
- `engine.py`: Основной класс `Board`, управляющий состоянием игры, подсчетом очков и проверкой легальности ходов. Использует алгоритм **DSU (Disjoint Set Union)** для оптимизированного поиска связных объектов (дорог, городов).
- `deck.py`: Описание стандартного набора из 72 тайлов.

### 2. Integration Layer (`src/mcp/`)
Реализация протокола **Model Context Protocol (MCP)**.
- `server.py`: Сервер, который предоставляет инструменты (`Tools`) для внешних ИИ-агентов.
- `prompts.py`: Библиотека промптов для реализации сложных стратегий (Tree of Thoughts, Reflexion).

### 3. AI Agents (`src/logic/agents.py`)
Реализация алгоритмов принятия решений:
- `GreedyAgent`: Простой жадный алгоритм.
- `StarAgent`: Эвристический поиск.
- `MCTSAgent`: Поиск по дереву Монте-Карло.
- `HybridLLMAgent`: Гибридный подход, использующий внешние LLM.

## Технологии
- Python 3.12+
- DSU (Система непересекающихся множеств)
- Hugging Face Inference API
- PIL (Pillow) для рендеринга
